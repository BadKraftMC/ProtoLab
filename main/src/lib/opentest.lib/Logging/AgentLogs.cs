using System.Text.Json;
using System.Text.Json.Serialization;

namespace ProtoLab.OpenTest;

public class AgentLogs : Output
{
    private readonly List<string> messages = new();

    public string[] Messages => messages.ToArray();
    [JsonIgnore]
    public override bool HasOutput => Messages.Any();

    public override void Log(string logEntry)
    {
        messages.Add(logEntry);
    }
    public override void ToJson(Utf8JsonWriter writer)
    {
        writer.WriteStartArray();
        foreach (var msg in Messages)
        {
            writer.WriteStringValue(msg);
        }
        writer.WriteEndArray();
    }
}

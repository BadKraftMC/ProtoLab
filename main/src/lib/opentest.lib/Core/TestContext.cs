namespace ProtoLab.OpenTest;

public class TestContext
{
    private static readonly Lazy<TestContext> _CONTEXT = new(() => new());

    internal Agent Agent { get; private set; }

    public static TestContext Current { get; } = _CONTEXT.Value;

    internal TestContext() { }


    /* **   disabled AgentLogger logging while process is under reconsideration and redesign
    internal void LogTestResult(string resultMessage)
    {
        ResultsLog.Enqueue(resultMessage);
    }
    internal void OutputResults(Action<string> output)
    {
        while (ResultsLog.TryDequeue(out string result))
        {
            output(result);
        }
    }
    ** */
    public Agent CreateAgent(Assembly assembly, Dictionary<Type, List<MethodInfo>> testSets)
    {
        return Agent = new(assembly, testSets);
    }
}

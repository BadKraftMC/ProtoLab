namespace ProtoLab.OpenTest;

public delegate TestRun LogWriter();
public delegate TestContext TestAssert();
public delegate TestContext TestAssertVerbose(bool isVerbose);

public abstract class TestSet
{
    internal static readonly TestContext TestContext = TestContext.Current;

    private Type Type { get; }
    private MethodInfo[] Methods { get; }

    internal KeyValuePair<Type, List<MethodInfo>> Info { get; }
    internal string SetName => Type.Name;

    public TestContext Context { get; } = TestContext;

    // can be null if the test set container is a static class
    public static TestAssert Assert => () => TestContext;
    public static TestAssertVerbose AssertVerbose => (f) => TestContext;

    public static LogWriter Log => () => TestContext.TestRuns.Current;

    public TestSet(KeyValuePair<Type, List<MethodInfo>> info) =>
        Info = info;
}
